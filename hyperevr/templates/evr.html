{% extends "base.html" %}

{% block title %}
  hyperEVR - {{project.title}} - Evidence
{% endblock %}

{% block content %}
<div id="components" style="overflow: auto; width: {{ (control_families|length+2) * 360 + 50 | int }}px;">

<div class="page-info-card-container" style="width:290px;">
  
  <div>{{ project.title }}</div>
  <h3 style="margin: 0 0 18px 0;">Evidence Viewer</h3>

  <div class="page-info-card">
    <h4>Evidence Stat Group 1:</h4>
    <div id="control-implementation-statistics">
    </div>

    <h4>Evidence Stat Group 2:</h4>
    <div id="control-parts-by-status">
    </div>

    <h4>Evidence Stat Group 3:</h4>
    <div id="language-statistics">
    </div>
  </div>

</div>

  {% for control_family in control_families %}
    <div class="card-control-container">

      <div>Control Group</div>
      <h3 style="margin: 0 0 18px 0;">
        {{ control_family.name }}
      </h3>

      <div class="containerx">
        <div style="overflow-x: auto; margin-left:2px; margin-right: 2px;">

      {% set outer_loop = loop %}

      {% for ef in control_family.artifacts %}
          <div class="card-control"
               title="{{ ef.Key }}"
               data-variable="control_{{outer_loop.index}}_{{loop.index}}">

              <div class="card-control-textlink">
                  {{ ef }}
              </div>
          </div>
      {% endfor %}

    </div>
  </div><!-- /row -->
  </div><!-- /container -->
{% endfor %}

</div>

{% endblock %}

{% block scripts %}
<script>
  // TEMPORARY SCRIPTS WHILE REFACTORING EVIDENCE PAGE
  $('.card-control[data-variable]').click(function() {
    // Show this element as active.
    var elem = $(this);
    $('.card-control').removeClass('active');
    elem.addClass('active');
  })

</script>
{% endblock %}